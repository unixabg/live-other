#!/bin/bash
#set -x

# Export a couple of variables to make udev happy.
export XAUTHORITY=/home/user/.Xauthority
export DISPLAY=:0.0

# First let us guess to see if remote display is connected and VGA
RDISPLAY=`xrandr -q | grep " connected" | awk '{if ($1 ~ /VGA/) print $1}'`

# Now let us try to guess to see what the local display is connected to and first guess LVDS
LDISPLAY=`xrandr -q | grep " connected" | awk '{if ($1 ~ /LVDS/) print $1}'`

# Test to see if our first guess was correct and if not try again
if [ -z "$LDISPLAY" ] || [ "$LDISPLAY" = "" ]; then
	# if nothing found then next guess for eDP1
	LDISPLAY=`xrandr -q | grep " connected" | awk '{if ($1 ~ /eDP/) print $1}'`
fi

# Now that we should have our variables populated let us try to pair up the displays
if [ -n "$RDISPLAY" ] || [ ! "$RDISPLAY" = "" ]; then
	echo "Attempt turning on second display."
	xrandr --output $RDISPLAY --auto --right-of $LDISPLAY
else
	echo "No VGA detected so just turn it off."
	xrandr --output $RDISPLAY --off
fi
exit 0;
